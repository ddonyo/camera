<!doctype html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Delayed Show</title>
        <meta name="description" content="Delayed Show" />
        <script src="https://cdn.tailwindcss.com"></script>
        <link rel="stylesheet" href="./styles/main.css" />
    </head>

    <body
        class="font-bold font-mono min-h-screen flex flex-col items-center bg-primary text-primary p-md"
        role="main"
    >
        <main
            id="mainContainer"
            class="w-full max-w-[1920px] max-h-[1080px] mx-auto flex flex-col shadow-xl space-y-1 bg-secondary border border-primary p-md"
            role="main"
        >
            <!-- 상단 2분할 -->
            <section class="main-grid-section grid grid-cols-1 lg:grid-cols-10 gap-1 flex-1">
                <!-- LEFT: 카메라 + 컨트롤 패널 -->
                <div class="col-span-7 flex flex-col gap-1">
                    <!-- 카메라 뷰 -->
                    <div
                        class="camera-container relative rounded-xl overflow-hidden bg-black aspect-video flex-1"
                    >
                        <div id="video-root" class="absolute inset-0 hidden"></div>
                        <canvas
                            id="viewer"
                            width="1280"
                            height="720"
                            class="absolute inset-0 w-full h-full viewer-canvas"
                            aria-label="MJPEG 비디오 스트림 표시 영역"
                            role="img"
                        ></canvas>
                        <div
                            class="absolute left-3 top-3 text-xs px-2 py-1 rounded bg-black/50 text-white"
                        >
                            Camera
                        </div>
                    </div>

                    <!-- 컨트롤 패널 -->
                    <div class="control-panel space-y-0">
                        <!-- 진행 바 -->
                        <div
                            id="progressBar"
                            class="w-full h-3 rounded progress-bar overflow-hidden bg-primary"
                            role="progressbar"
                            aria-label="재생 진행률"
                        >
                            <div id="progress" class="h-full bg-blue-500"></div>
                        </div>

                        <!-- 컨트롤 -->
                        <section
                            class="grid grid-cols-3 items-center gap-md text-base control-area"
                            aria-label="비디오 제어 패널"
                        >
                            <div
                                class="control-group justify-start"
                                role="group"
                                aria-label="모드 제어"
                            >
                                <button
                                    id="liveBtn"
                                    class="control-btn tgl"
                                    aria-label="라이브 모드 토글"
                                >
                                    <img
                                        src="./resources/live_0.png"
                                        alt=""
                                        class="control-icon"
                                        aria-hidden="true"
                                    /><span>Live</span>
                                </button>
                                <button
                                    id="recordBtn"
                                    class="control-btn tgl"
                                    aria-label="녹화 모드 토글"
                                >
                                    <img
                                        src="./resources/record_0.png"
                                        alt=""
                                        class="control-icon"
                                        aria-hidden="true"
                                    /><span>Rec</span>
                                </button>
                                <button
                                    id="playbackBtn"
                                    class="control-btn tgl"
                                    aria-label="재생 모드 진입"
                                >
                                    <img
                                        src="./resources/playback_0.png"
                                        alt=""
                                        class="control-icon"
                                        aria-hidden="true"
                                    /><span>Play</span>
                                </button>
                                <div
                                    id="status"
                                    class="inline-status"
                                    role="status"
                                    aria-live="polite"
                                >
                                    <pre
                                        id="statusText"
                                        class="status-text normal"
                                    >File Path:<br/>File Name:<br/>Frame:</pre>
                                </div>
                            </div>

                            <div
                                class="flex gap-0 justify-center"
                                role="group"
                                aria-label="재생 제어"
                            >
                                <button
                                    id="rewindBtn"
                                    disabled
                                    class="control-btn btn"
                                    aria-label="처음으로 되감기"
                                >
                                    <img
                                        src="./resources/rewind_0.png"
                                        alt=""
                                        class="control-icon"
                                    />
                                </button>
                                <button
                                    id="prevFrameBtn"
                                    disabled
                                    class="control-btn btn"
                                    aria-label="이전 프레임"
                                >
                                    <img
                                        src="./resources/prevframe_0.png"
                                        alt=""
                                        class="control-icon"
                                    />
                                </button>
                                <button
                                    id="reverseBtn"
                                    disabled
                                    class="control-btn tgl"
                                    aria-label="역재생"
                                >
                                    <img
                                        src="./resources/reverse_0.png"
                                        alt=""
                                        class="control-icon"
                                    />
                                </button>
                                <button
                                    id="pauseBtn"
                                    disabled
                                    class="control-btn tgl"
                                    aria-label="일시정지"
                                >
                                    <img
                                        src="./resources/pause_0.png"
                                        alt=""
                                        class="control-icon"
                                    />
                                </button>
                                <button
                                    id="playBtn"
                                    disabled
                                    class="control-btn tgl"
                                    aria-label="재생"
                                >
                                    <img src="./resources/play_0.png" alt="" class="control-icon" />
                                </button>
                                <button
                                    id="nextFrameBtn"
                                    disabled
                                    class="control-btn btn"
                                    aria-label="다음 프레임"
                                >
                                    <img
                                        src="./resources/nextframe_0.png"
                                        alt=""
                                        class="control-icon"
                                    />
                                </button>
                                <button
                                    id="fastForwardBtn"
                                    disabled
                                    class="control-btn btn"
                                    aria-label="마지막으로 빨리감기"
                                >
                                    <img
                                        src="./resources/fastforward_0.png"
                                        alt=""
                                        class="control-icon"
                                    />
                                </button>
                            </div>

                            <div
                                class="control-group justify-end"
                                role="group"
                                aria-label="재생 설정"
                            >
                                <!-- onclick 제거, data-attr로 JS가 바인딩 -->
                                <label class="number-input-label control-settings">
                                    <div
                                        class="number-input-wrapper"
                                        data-number-input="delayInput"
                                        data-step="1"
                                        data-min="0"
                                        data-max="10"
                                    >
                                        <input
                                            type="number"
                                            id="delayInput"
                                            name="delay"
                                            value="0"
                                            min="0"
                                            max="10"
                                            disabled
                                            aria-label="딜레이 시간 설정"
                                        />
                                        <div class="number-input-buttons">
                                            <button
                                                type="button"
                                                class="number-input-btn up"
                                                aria-label="딜레이 증가"
                                            ></button>
                                            <button
                                                type="button"
                                                class="number-input-btn down"
                                                aria-label="딜레이 감소"
                                            ></button>
                                        </div>
                                    </div>
                                    <span>Delay</span>
                                </label>

                                <label class="number-input-label control-settings">
                                    <div
                                        class="number-input-wrapper"
                                        data-number-input="speedInput"
                                        data-step="0.2"
                                        data-min="0.2"
                                        data-max="4.0"
                                    >
                                        <input
                                            type="number"
                                            id="speedInput"
                                            name="speed"
                                            value="1.0"
                                            min="0.2"
                                            max="4.0"
                                            step="0.2"
                                            disabled
                                            aria-label="재생 속도 설정"
                                        />
                                        <div class="number-input-buttons">
                                            <button
                                                type="button"
                                                class="number-input-btn up"
                                                aria-label="속도 증가"
                                            ></button>
                                            <button
                                                type="button"
                                                class="number-input-btn down"
                                                aria-label="속도 감소"
                                            ></button>
                                        </div>
                                    </div>
                                    <span>Speed</span>
                                </label>

                                <button
                                    id="repeatBtn"
                                    disabled
                                    class="control-base control-btn tgl control-settings"
                                    aria-label="반복 재생 토글"
                                >
                                    <img
                                        src="./resources/repeat_0.png"
                                        alt=""
                                        class="control-icon"
                                    /><span>Repeat</span>
                                </button>
                                <button
                                    id="rembgBtn"
                                    class="control-base control-btn tgl control-settings"
                                    aria-label="배경 제거 토글"
                                >
                                    <svg
                                        class="control-icon"
                                        viewBox="0 0 24 24"
                                        fill="currentColor"
                                    >
                                        <path
                                            d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2zm0 4.24L10.12 10.2l-2.43.35 1.76 1.71-.41 2.44L12 13.27l2.96 1.43-.41-2.44 1.76-1.71-2.43-.35L12 6.24z"
                                        /></svg
                                    ><span>RemBG</span>
                                </button>
                                <button
                                    id="cropBtn"
                                    class="control-base control-btn tgl control-settings"
                                    aria-label="중앙 영역 크롭 토글"
                                >
                                    <svg
                                        class="control-icon"
                                        viewBox="0 0 24 24"
                                        fill="currentColor"
                                    >
                                        <path
                                            d="M7 17h8v2H7v-2zm0-2h8V5h2V3c-1.1 0-2 .9-2 2H7V3c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2zm10-10V3H9v2h8zm0 2v8h2V7h-2zm-8 8V7H7v8h2z"
                                        /></svg
                                    ><span>Crop</span>
                                </button>
                                <button
                                    id="flipBtn"
                                    class="control-base control-btn tgl control-settings"
                                    aria-label="좌우 반전 토글"
                                >
                                    <img
                                        src="./resources/flip_0.png"
                                        alt=""
                                        class="control-icon"
                                    /><span>Flip</span>
                                </button>
                                <button
                                    id="fullBtn"
                                    class="control-base control-btn tgl control-settings"
                                    aria-label="카메라 풀뷰 모드 토글"
                                    title="카메라 풀뷰"
                                >
                                    <svg
                                        class="control-icon"
                                        viewBox="0 0 24 24"
                                        fill="currentColor"
                                    >
                                        <path
                                            d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"
                                        />
                                    </svg>
                                    <span>Full</span>
                                </button>
                            </div>
                        </section>
                    </div>
                </div>

                <!-- RIGHT: VTON 패널 -->
                <div
                    id="vton-panel"
                    class="vton-panel rounded-xl bg-black h-full col-span-3 relative"
                >
                    <img
                        id="vtonResult"
                        src="./resources/vton/placeholder.jpg"
                        alt="VTON Result"
                        class="w-full h-full object-contain select-none"
                    />

                    <!-- 로딩 오버레이 -->
                    <div
                        id="vtonLoading"
                        class="hidden absolute inset-0 grid place-items-center bg-black/60"
                    >
                        <div
                            class="flex flex-col items-center gap-2 px-4 py-3 rounded-md bg-white/90 text-black"
                        >
                            <img
                                src="./resources/ui/spinner.gif"
                                alt="Loading..."
                                class="w-6 h-6 animate-spin"
                            />
                            <div class="w-48 h-2 bg-gray-200 rounded">
                                <div
                                    id="vtonProgressBar"
                                    class="h-2 bg-gray-800 rounded"
                                    style="width: 0%"
                                ></div>
                            </div>
                            <div id="vtonProgressText" class="text-xs">Preparing...</div>
                        </div>
                    </div>

                    <div
                        id="vtonError"
                        class="hidden absolute top-2 left-2 bg-red-600 text-white text-xs px-2 py-1 rounded"
                    >
                        Failed to generate. Try again.
                    </div>

                    <!-- VTON 모드 선택 -->
                    <div class="absolute bottom-3 left-3 right-3">
                        <div
                            class="vton-mode-selector bg-black/80 backdrop-blur-sm rounded-lg p-3 border border-gray-600 flex items-center gap-3"
                        >
                            <label
                                for="vtonModeSelect"
                                class="text-xs text-white font-medium whitespace-nowrap"
                                >VTON Mode</label
                            >
                            <select
                                id="vtonModeSelect"
                                class="vton-mode-select flex-1 px-3 py-2 text-xs rounded bg-gray-700 text-white border border-gray-500 focus:border-blue-500 focus:outline-none"
                            >
                                <option value="performance">Performance</option>
                                <option value="balanced" selected>Balanced</option>
                                <option value="quality">Quality</option>
                            </select>
                        </div>
                    </div>

                    <div
                        class="absolute left-3 top-3 text-xs px-2 py-1 rounded bg-black/50 text-white"
                    >
                        VTON Result
                    </div>
                </div>
            </section>

            <!-- 하단 Wardrobe -->
            <section aria-label="Wardrobe" class="wardrobe-section space-y-0 -mt-1">
                <h2 class="text-xl leading-tight">Wardrobe</h2>
                <div
                    id="wardrobeGrid"
                    class="flex gap-3 overflow-x-auto pb-2 snap-x snap-mandatory"
                >
                    <!-- (기존 버튼들 그대로) -->
                    <!-- ... -->
                </div>
            </section>
        </main>

        <footer class="mt-2 text-center text-secondary text-base" role="contentinfo">
            <p>Copyright &copy; 2025 LG Electronics Inc. All rights reserved.</p>
            <p>
                Support:
                <a href="mailto:mbtask-all@lge.com" class="hover:text-blue-400 transition-colors"
                    >mbtask-all@lge.com</a
                >
            </p>
        </footer>

        <!-- 초기화 엔트리 -->
        <script type="module" src="../src/app-init.js"></script>
    </body>
</html>
